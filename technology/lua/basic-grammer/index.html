<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lua基础语法 | 个人知识库</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/">
    <meta name="description" content="Just playing around">
    <link rel="preload" href="/assets/css/0.styles.cdff4760.css" as="style"><link rel="preload" href="/assets/js/app.2df33bbd.js" as="script"><link rel="preload" href="/assets/js/2.f873f4a5.js" as="script"><link rel="preload" href="/assets/js/61.d3577fc0.js" as="script"><link rel="prefetch" href="/assets/js/10.fce11a4f.js"><link rel="prefetch" href="/assets/js/100.93d57fe5.js"><link rel="prefetch" href="/assets/js/101.cb59cb7c.js"><link rel="prefetch" href="/assets/js/102.9bda773f.js"><link rel="prefetch" href="/assets/js/103.90765133.js"><link rel="prefetch" href="/assets/js/104.3198dcb0.js"><link rel="prefetch" href="/assets/js/105.56ce9ed9.js"><link rel="prefetch" href="/assets/js/106.53664c48.js"><link rel="prefetch" href="/assets/js/107.5cda28a1.js"><link rel="prefetch" href="/assets/js/108.6f6019c3.js"><link rel="prefetch" href="/assets/js/109.a7740201.js"><link rel="prefetch" href="/assets/js/11.49901c43.js"><link rel="prefetch" href="/assets/js/110.632b525e.js"><link rel="prefetch" href="/assets/js/111.274b06dc.js"><link rel="prefetch" href="/assets/js/112.d0e88d20.js"><link rel="prefetch" href="/assets/js/113.486e4fc8.js"><link rel="prefetch" href="/assets/js/114.c69339e6.js"><link rel="prefetch" href="/assets/js/115.204c5dbb.js"><link rel="prefetch" href="/assets/js/116.3765742a.js"><link rel="prefetch" href="/assets/js/117.8d1b805e.js"><link rel="prefetch" href="/assets/js/118.ef246e62.js"><link rel="prefetch" href="/assets/js/119.b9f20cb0.js"><link rel="prefetch" href="/assets/js/12.9581203a.js"><link rel="prefetch" href="/assets/js/120.8cd8657c.js"><link rel="prefetch" href="/assets/js/121.72f63b4e.js"><link rel="prefetch" href="/assets/js/122.8928e827.js"><link rel="prefetch" href="/assets/js/123.67594cad.js"><link rel="prefetch" href="/assets/js/124.eb1ef9b0.js"><link rel="prefetch" href="/assets/js/125.1a2cee51.js"><link rel="prefetch" href="/assets/js/126.d1e6cc77.js"><link rel="prefetch" href="/assets/js/13.175440db.js"><link rel="prefetch" href="/assets/js/14.dd1b88c1.js"><link rel="prefetch" href="/assets/js/15.c0d81c5c.js"><link rel="prefetch" href="/assets/js/16.af59b3be.js"><link rel="prefetch" href="/assets/js/17.a8b4125e.js"><link rel="prefetch" href="/assets/js/18.1b6202ac.js"><link rel="prefetch" href="/assets/js/19.eba09d42.js"><link rel="prefetch" href="/assets/js/20.781c5235.js"><link rel="prefetch" href="/assets/js/21.0d0dcb08.js"><link rel="prefetch" href="/assets/js/22.29dad8ec.js"><link rel="prefetch" href="/assets/js/23.1d26584e.js"><link rel="prefetch" href="/assets/js/24.c3f593b2.js"><link rel="prefetch" href="/assets/js/25.e67dbcb2.js"><link rel="prefetch" href="/assets/js/26.9bee3ad2.js"><link rel="prefetch" href="/assets/js/27.584f8aa6.js"><link rel="prefetch" href="/assets/js/28.139d901b.js"><link rel="prefetch" href="/assets/js/29.95eb557b.js"><link rel="prefetch" href="/assets/js/3.37ac9c63.js"><link rel="prefetch" href="/assets/js/30.94baf8dd.js"><link rel="prefetch" href="/assets/js/31.c834f849.js"><link rel="prefetch" href="/assets/js/32.87c1eecf.js"><link rel="prefetch" href="/assets/js/33.1688c66e.js"><link rel="prefetch" href="/assets/js/34.ed32a02c.js"><link rel="prefetch" href="/assets/js/35.df4f1018.js"><link rel="prefetch" href="/assets/js/36.527e96b0.js"><link rel="prefetch" href="/assets/js/37.7c5e9b9c.js"><link rel="prefetch" href="/assets/js/38.a3f4dc09.js"><link rel="prefetch" href="/assets/js/39.9a9e7eea.js"><link rel="prefetch" href="/assets/js/4.0b4366d3.js"><link rel="prefetch" href="/assets/js/40.bbf5aca3.js"><link rel="prefetch" href="/assets/js/41.20271d2a.js"><link rel="prefetch" href="/assets/js/42.044ea8ca.js"><link rel="prefetch" href="/assets/js/43.e2de2e27.js"><link rel="prefetch" href="/assets/js/44.816538c7.js"><link rel="prefetch" href="/assets/js/45.423e2f6b.js"><link rel="prefetch" href="/assets/js/46.d97670c4.js"><link rel="prefetch" href="/assets/js/47.6fcd8eed.js"><link rel="prefetch" href="/assets/js/48.145fd2d1.js"><link rel="prefetch" href="/assets/js/49.7ef5a6f8.js"><link rel="prefetch" href="/assets/js/5.d7192128.js"><link rel="prefetch" href="/assets/js/50.63ebea49.js"><link rel="prefetch" href="/assets/js/51.cd1b6979.js"><link rel="prefetch" href="/assets/js/52.65e83723.js"><link rel="prefetch" href="/assets/js/53.482bb8f0.js"><link rel="prefetch" href="/assets/js/54.8d211ee5.js"><link rel="prefetch" href="/assets/js/55.6d0279ca.js"><link rel="prefetch" href="/assets/js/56.0d7dabe8.js"><link rel="prefetch" href="/assets/js/57.d174b462.js"><link rel="prefetch" href="/assets/js/58.10d297e6.js"><link rel="prefetch" href="/assets/js/59.8994ec9e.js"><link rel="prefetch" href="/assets/js/6.cbfd5b89.js"><link rel="prefetch" href="/assets/js/60.af139070.js"><link rel="prefetch" href="/assets/js/62.e17d1882.js"><link rel="prefetch" href="/assets/js/63.e4036107.js"><link rel="prefetch" href="/assets/js/64.49321f56.js"><link rel="prefetch" href="/assets/js/65.3d22da24.js"><link rel="prefetch" href="/assets/js/66.77f21329.js"><link rel="prefetch" href="/assets/js/67.fde317d6.js"><link rel="prefetch" href="/assets/js/68.be19352b.js"><link rel="prefetch" href="/assets/js/69.4d3394b6.js"><link rel="prefetch" href="/assets/js/7.72adfabd.js"><link rel="prefetch" href="/assets/js/70.8fb36dbf.js"><link rel="prefetch" href="/assets/js/71.ac4e90a2.js"><link rel="prefetch" href="/assets/js/72.d098537d.js"><link rel="prefetch" href="/assets/js/73.95e18118.js"><link rel="prefetch" href="/assets/js/74.6fcf2855.js"><link rel="prefetch" href="/assets/js/75.87ad266a.js"><link rel="prefetch" href="/assets/js/76.28b55be0.js"><link rel="prefetch" href="/assets/js/77.6cb37bb4.js"><link rel="prefetch" href="/assets/js/78.79aefebb.js"><link rel="prefetch" href="/assets/js/79.6ed9e466.js"><link rel="prefetch" href="/assets/js/8.33b24897.js"><link rel="prefetch" href="/assets/js/80.671e3b50.js"><link rel="prefetch" href="/assets/js/81.f62a79b7.js"><link rel="prefetch" href="/assets/js/82.f3617058.js"><link rel="prefetch" href="/assets/js/83.18d0b631.js"><link rel="prefetch" href="/assets/js/84.fa6dee80.js"><link rel="prefetch" href="/assets/js/85.5f503b09.js"><link rel="prefetch" href="/assets/js/86.ad4607a2.js"><link rel="prefetch" href="/assets/js/87.f138000c.js"><link rel="prefetch" href="/assets/js/88.4b42282c.js"><link rel="prefetch" href="/assets/js/89.12e2a728.js"><link rel="prefetch" href="/assets/js/9.58fc3c18.js"><link rel="prefetch" href="/assets/js/90.ab27811b.js"><link rel="prefetch" href="/assets/js/91.97ac4e80.js"><link rel="prefetch" href="/assets/js/92.05c95c03.js"><link rel="prefetch" href="/assets/js/93.2df35e20.js"><link rel="prefetch" href="/assets/js/94.95c2bb02.js"><link rel="prefetch" href="/assets/js/95.6f61d80f.js"><link rel="prefetch" href="/assets/js/96.4ad62f06.js"><link rel="prefetch" href="/assets/js/97.b2963771.js"><link rel="prefetch" href="/assets/js/98.aec26723.js"><link rel="prefetch" href="/assets/js/99.15dceb59.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cdff4760.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/image/logo.png" alt="个人知识库" class="logo"> <span class="site-name can-hide">个人知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/about/me/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程技术" class="dropdown-title"><a href="/technology/" class="link-title router-link-active">编程技术</a> <span class="title" style="display:none;">编程技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technology/c/array/" class="nav-link">C语言</a></li><li class="dropdown-item"><!----> <a href="/technology/c++/vs-setting/" class="nav-link">CPlusPlus</a></li><li class="dropdown-item"><!----> <a href="/technology/linux/basic/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/technology/php/" class="nav-link">PHP</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用框架" class="dropdown-title"><a href="/framework/" class="link-title">应用框架</a> <span class="title" style="display:none;">应用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/nginx/install/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/framework/mysql/c_api/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/framework/redis/basic/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/framework/docker/basic/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/framework/kubernetes/basic/" class="nav-link">Kubernetes</a></li><li class="dropdown-item"><!----> <a href="/framework/srs/basic/" class="nav-link">SRS</a></li></ul></div></div><div class="nav-item"><a href="/read/soul/Self-motivated/" class="nav-link">阅读</a></div><div class="nav-item"><a href="/tools/github/" class="nav-link">常用工具</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/tags/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/Agnes001/blog_vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/image/1.jpg"> <div class="blogger-info"><h3>Agnes001</h3> <span>
        坚持是一件很伟大的事业
      </span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/about/me/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程技术" class="dropdown-title"><a href="/technology/" class="link-title router-link-active">编程技术</a> <span class="title" style="display:none;">编程技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technology/c/array/" class="nav-link">C语言</a></li><li class="dropdown-item"><!----> <a href="/technology/c++/vs-setting/" class="nav-link">CPlusPlus</a></li><li class="dropdown-item"><!----> <a href="/technology/linux/basic/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/technology/php/" class="nav-link">PHP</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="应用框架" class="dropdown-title"><a href="/framework/" class="link-title">应用框架</a> <span class="title" style="display:none;">应用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/nginx/install/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/framework/mysql/c_api/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/framework/redis/basic/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/framework/docker/basic/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/framework/kubernetes/basic/" class="nav-link">Kubernetes</a></li><li class="dropdown-item"><!----> <a href="/framework/srs/basic/" class="nav-link">SRS</a></li></ul></div></div><div class="nav-item"><a href="/read/soul/Self-motivated/" class="nav-link">阅读</a></div><div class="nav-item"><a href="/tools/github/" class="nav-link">常用工具</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/tags/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/Agnes001/blog_vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>C语言</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CPlusPlus</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Lua技术栈</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technology/lua/basic-grammer/" aria-current="page" class="active sidebar-link">Lua基础语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#程序的执行" class="sidebar-link">程序的执行</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#注释" class="sidebar-link">注释</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#解释器程序" class="sidebar-link">解释器程序</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#类型与值" class="sidebar-link">类型与值</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#逻辑运算符" class="sidebar-link">逻辑运算符</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#运算符优先级" class="sidebar-link">运算符优先级</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#table构造式" class="sidebar-link">table构造式</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#控制语句" class="sidebar-link">控制语句</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#函数" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#多重返回值" class="sidebar-link">多重返回值</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#变长参数" class="sidebar-link">变长参数</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#闭合函数-closure" class="sidebar-link">闭合函数（closure）</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#尾调用" class="sidebar-link">尾调用</a></li></ul></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#元表-metatable" class="sidebar-link">元表(metatable)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#index-元方法" class="sidebar-link">__index 元方法</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#newindex-元方法" class="sidebar-link">__newindex 元方法</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#为表添加操作符" class="sidebar-link">为表添加操作符</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#call-元方法" class="sidebar-link">__call 元方法</a></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#tostring-元方法" class="sidebar-link">__tostring 元方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#lua协同程序-coroutine" class="sidebar-link">lua协同程序(coroutine)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technology/lua/basic-grammer/#线程和协同程序区别" class="sidebar-link">线程和协同程序区别</a></li></ul></li></ul></li><li><a href="/technology/lua/lua-function/" class="sidebar-link">Cpp与Lua联合</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>edoyun</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>内存管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>池化技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>操作系统</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>python</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-14888ed5><div class="articleInfo" data-v-14888ed5><ul class="breadcrumbs" data-v-14888ed5><li data-v-14888ed5><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-14888ed5></a></li> <li data-v-14888ed5><a href="/categories/?category=%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF" title="分类" data-v-14888ed5>编程技术</a></li> <li data-v-14888ed5><a href="/categories/?category=Lua%E6%8A%80%E6%9C%AF%E6%A0%88" title="分类" data-v-14888ed5>Lua技术栈</a></li></ul> <div class="info" data-v-14888ed5><div title="作者" class="author iconfont icon-touxiang" data-v-14888ed5><a href="https://github.com/Agnes001" target="_blank" title="作者" class="beLink" data-v-14888ed5>Agnes001</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-14888ed5><a href="javascript:;" data-v-14888ed5>2021-01-23</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          Lua基础语法
        </h1> <div class="theme-vdoing-content content__default"><h2 id="程序的执行"><a href="#程序的执行" class="header-anchor">#</a> 程序的执行</h2> <p>Lua 交互式编程模式可以通过命令 lua -i 或 lua 来启用：<br>
lua -i &quot;test.lua&quot; 进入交互模式，先执行脚本文件中的内容，比如输入一个数字</p> <p>dofile(&quot;demo.lua&quot;)
加载lua文件,比如该文件定义了一些函数，加载该文件后可以直接使用定义好的函数</p> <p>a = io.read(&quot;*number&quot;)</p> <h2 id="注释"><a href="#注释" class="header-anchor">#</a> 注释</h2> <ol><li><p>注释单行</p> <p>--后边是注释</p></li> <li><p>注释多行</p> <p>--[[
中间是要注释的内容
]]</p></li></ol> <h2 id="解释器程序"><a href="#解释器程序" class="header-anchor">#</a> 解释器程序</h2> <p>lua [选项参数] [脚本参数]<br>
-e 可直接输入要执行的内容<br>
-l 加载库文件<br>
-i 运行完脚本文件再进入交互模式</p> <h2 id="类型与值"><a href="#类型与值" class="header-anchor">#</a> 类型与值</h2> <ol><li><p>nil(空)<br>
给全局变量或者 table 表里的变量赋一个 nil 值，等同于把它们删掉<br>
判断类型是否为nil时需要加引号  type(a) == 'nil' --&gt; true</p></li> <li><p>boolean(布尔)<br>
Lua 把 false 和 nil 看作是 false，其他的都为 true，数字 0 也是 true</p></li> <li><p>number(数字)</p></li> <li><p>string(字符串)<br>
a = &quot;one string&quot;<br>
b = string.gsub(a,&quot;one&quot;,&quot;another&quot;)</p> <ul><li>字符串由一对双引号或单引号来表示,也可以用 2 个方括号 &quot;[[]]&quot; 来表示&quot;一块&quot;字符串。</li> <li>在对一个数字字符串上进行算术操作时，Lua 会尝试将这个数字字符串转成一个数字</li> <li>使用 # 来计算字符串的长度，放在字符串前面</li> <li>.. 是字符串连接操作</li></ul></li> <li><p>table(表)
关联数组</p> <ul><li>使用 # 来计算表的大小</li> <li>数组通常以 1 作为索引的初始值</li></ul></li> <li><p>function(函数)</p></li> <li><p>userdata(自定义类型)<br>
可以将任意 C/C++ 的任意数据类型的数据（通常是 struct 和 指针）存储到 Lua 变量中调用。</p></li> <li><p>thread(线程)</p></li></ol> <p>type函数返回数据的类型</p> <h2 id="逻辑运算符"><a href="#逻辑运算符" class="header-anchor">#</a> 逻辑运算符</h2> <p>x = x or v 等价于 if not x then x=v end<br>
a and b or c 等价于C语言中 a?b:c<br>
max = (x&gt;y) and x or y</p> <h2 id="运算符优先级"><a href="#运算符优先级" class="header-anchor">#</a> 运算符优先级</h2> <p>从高到低的顺序：</p> <ol><li>^</li> <li>not    - (unary)</li> <li>*      /       %</li> <li>+      -</li> <li>..</li> <li>&lt;      &gt;      &lt;=     &gt;=     ~=     ==</li> <li>and</li> <li>or</li></ol> <h2 id="table构造式"><a href="#table构造式" class="header-anchor">#</a> table构造式</h2> <p>当我们为 table a 并设置元素，然后将 a 赋值给 b，则 a 与 b 都指向同一个内存。如果 a 设置为 nil ，则 b 同样能访问 table 的元素。如果没有指定的变量指向a，Lua的垃圾回收机制会清理相对应的内存。</p> <p>创建程序块
do ...... end</p> <h2 id="控制语句"><a href="#控制语句" class="header-anchor">#</a> 控制语句</h2> <ol><li>if</li></ol> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">if</span> a <span class="token operator">&lt;</span> b <span class="token keyword">then</span>
    <span class="token keyword">return</span> a
<span class="token keyword">else</span>        <span class="token comment">-- 嵌套时使用else if</span>
    <span class="token keyword">return</span> b
<span class="token keyword">end</span>
</code></pre></div><ol start="2"><li>while</li></ol> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">local</span> i <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">while</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
<span class="token keyword">end</span>
</code></pre></div><ol start="3"><li>repeat</li></ol> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">repeat</span>
    line <span class="token operator">=</span> io<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
util line <span class="token operator">~=</span> <span class="token string">&quot;&quot;</span>
</code></pre></div><ol start="4"><li>for</li></ol> <ul><li>数值型for</li></ul> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">-- var变量，exp1到exp2，exp3为步长</span>
<span class="token keyword">for</span> var<span class="token operator">=</span>exp1<span class="token punctuation">,</span>exp2<span class="token punctuation">,</span>exp3 <span class="token keyword">do</span>
    <span class="token operator">&lt;</span>执行体<span class="token operator">&gt;</span>
<span class="token keyword">end</span>

<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token keyword">end</span>
 
<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre></div><ul><li>泛型for</li></ul> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">for</span> i<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token function">print</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre></div><h2 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h2> <p>在Lua中，函数是一种“第一类值”，它们具有特定的词法域。词法域是指一个函数可以嵌套在另一个函数中，内部的函数可以访问外部函数中的变量。</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">...</span>
<span class="token keyword">end</span>
</code></pre></div><p>unpack(a) a是table类型，经过unpack传入函数，将a的所有元素都传入</p> <h3 id="多重返回值"><a href="#多重返回值" class="header-anchor">#</a> 多重返回值</h3> <p>return ret1,ret2</p> <h3 id="变长参数"><a href="#变长参数" class="header-anchor">#</a> 变长参数</h3> <p>Lua 函数可以接受可变数目的参数，和 C 语言类似，在函数参数列表中使用三点 ... 表示函数有可变的参数。<br>
通过 select(&quot;#&quot;,...) 来获取可变参数的数量</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">function</span> <span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span>
   result <span class="token operator">=</span> <span class="token number">0</span>
   <span class="token keyword">local</span> arg<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token punctuation">}</span>
   <span class="token keyword">for</span> i<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token keyword">do</span>
      result <span class="token operator">=</span> result <span class="token operator">+</span> v
   <span class="token keyword">end</span>
   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;总共传入 &quot;</span> <span class="token operator">..</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#&quot;</span><span class="token punctuation">,</span><span class="token punctuation">...</span><span class="token punctuation">)</span> <span class="token operator">..</span> <span class="token string">&quot; 个数&quot;</span><span class="token punctuation">)</span>
   <span class="token keyword">return</span> result<span class="token operator">/</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#&quot;</span><span class="token punctuation">,</span><span class="token punctuation">...</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;平均值为&quot;</span><span class="token punctuation">,</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="闭合函数-closure"><a href="#闭合函数-closure" class="header-anchor">#</a> 闭合函数（closure）</h3> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">function</span> <span class="token function">newCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> i <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">-- 匿名函数</span>
        i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">return</span> i
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

c1 <span class="token operator">=</span> <span class="token function">newCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">c1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">--&gt; 1</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">c1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">--&gt; 2</span>

<span class="token comment">-- i是“非局部的变量”(upvalue)，既不是全局变量，也不是局部变量，而是外部函数的局部变量，该变量用于保持一个计数器</span>
<span class="token comment">-- 一个closure就是一个函数加上该函数所需访问的所有“非局部的变量”</span>
<span class="token comment">-- 如果再次调用newCounter，那么它会创建一个新的局部变量，从而也将得到一个新的closure</span>

c2 <span class="token operator">=</span> <span class="token function">newCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">c2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">--&gt; 1</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">c1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">--&gt; 3</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">c2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">--&gt; 2</span>

<span class="token comment">-- 因此c1和c2是同一个函数所创建的两个不同的closure，它们各自拥有局部变量i的独立实例。</span>
</code></pre></div><h3 id="尾调用"><a href="#尾调用" class="header-anchor">#</a> 尾调用</h3> <p>当一个函数调用时另一个函数的最后一个动作时，该调用是一条“尾调用”。</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">g</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token keyword">end</span>
<span class="token comment">-- 也就是当f调用完g之后再无其他事情可做了，在这种情况下，程序不需要返回那个“尾调用”所在的函数了。</span>
</code></pre></div><p><strong>以后还需要再补充</strong></p> <h2 id="元表-metatable"><a href="#元表-metatable" class="header-anchor">#</a> 元表(metatable)</h2> <div class="language- extra-class"><pre class="language-text"><code>meta- 元-   
metatable 元数据，描述数据的数据  
metatable,允许改变table的行为，每个行为关联了对应的元方法。
setmetatable(table,metatable): 对指定 table 设置元表(metatable)，如果元表(metatable)中存在 __metatable 键值，setmetatable 会失败。
getmetatable(table): 返回对象的元表(metatable)。
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code>mytable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>                          <span class="token comment">-- 普通表</span>
mymetatable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>                      <span class="token comment">-- 元表</span>
<span class="token function">setmetatable</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span>mymetatable<span class="token punctuation">)</span>     <span class="token comment">-- 把 mymetatable 设为 mytable 的元表</span>
<span class="token comment">-- 以上代码也可以直接写成一行：</span>
mytable <span class="token operator">=</span> <span class="token function">setmetatable</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">-- 以下为返回对象元表：</span>
<span class="token function">getmetatable</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span>                 <span class="token comment">-- 这回返回mymetatable</span>
</code></pre></div><h3 id="index-元方法"><a href="#index-元方法" class="header-anchor">#</a> __index 元方法</h3> <ol><li>当你通过键来访问 table 的时候，如果这个键没有值，那么Lua就会寻找该table的metatable（假定有metatable）中的__index 键。如果__index包含一个表格，Lua会在表格中查找相应的键。</li> <li>如果__index包含一个函数的话，Lua就会调用那个函数，table和键会作为参数传递给函数。__index 元方法查看表中元素是否存在，如果不存在，返回结果为 nil；如果存在则由 __index 返回结果。</li></ol> <div class="language-lua extra-class"><pre class="language-lua"><code>mytable <span class="token operator">=</span> <span class="token function">setmetatable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>key1 <span class="token operator">=</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  __index <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
    <span class="token keyword">if</span> key <span class="token operator">==</span> <span class="token string">&quot;key2&quot;</span> <span class="token keyword">then</span>
      <span class="token keyword">return</span> <span class="token string">&quot;metatablevalue&quot;</span>
    <span class="token keyword">else</span>
      <span class="token keyword">return</span> <span class="token keyword">nil</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>mytable<span class="token punctuation">.</span>key1<span class="token punctuation">,</span>mytable<span class="token punctuation">.</span>key2<span class="token punctuation">)</span>
<span class="token comment">-- 实例输出结果为：</span>
<span class="token comment">-- value1    metatablevalue</span>
</code></pre></div><h3 id="newindex-元方法"><a href="#newindex-元方法" class="header-anchor">#</a> __newindex 元方法</h3> <p>__newindex 元方法用来对表更新，__index则用来对表访问 。</p> <p>当你给表的一个缺少的索引赋值，解释器就会查找__newindex 元方法：如果存在则调用这个函数而不进行赋值操作。</p> <div class="language-lua extra-class"><pre class="language-lua"><code>mymetatable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
mytable <span class="token operator">=</span> <span class="token function">setmetatable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>key1 <span class="token operator">=</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> __newindex <span class="token operator">=</span> mymetatable <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>mytable<span class="token punctuation">.</span>key1<span class="token punctuation">)</span>

mytable<span class="token punctuation">.</span>newkey <span class="token operator">=</span> <span class="token string">&quot;新值2&quot;</span>
<span class="token function">print</span><span class="token punctuation">(</span>mytable<span class="token punctuation">.</span>newkey<span class="token punctuation">,</span>mymetatable<span class="token punctuation">.</span>newkey<span class="token punctuation">)</span>

mytable<span class="token punctuation">.</span>key1 <span class="token operator">=</span> <span class="token string">&quot;新值1&quot;</span>
<span class="token function">print</span><span class="token punctuation">(</span>mytable<span class="token punctuation">.</span>key1<span class="token punctuation">,</span>mymetatable<span class="token punctuation">.</span>key1<span class="token punctuation">)</span>
<span class="token comment">-- 以上实例执行输出结果为：</span>
<span class="token comment">-- value1</span>
<span class="token comment">-- nil    新值2</span>
<span class="token comment">-- 新值1    nil</span>

<span class="token comment">-- 实例:使用了 rawset 函数来更新表：</span>
mytable <span class="token operator">=</span> <span class="token function">setmetatable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>key1 <span class="token operator">=</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  __newindex <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
                <span class="token function">rawset</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token string">&quot;\&quot;&quot;</span><span class="token operator">..</span>value<span class="token operator">..</span><span class="token string">&quot;\&quot;&quot;</span><span class="token punctuation">)</span>

  <span class="token keyword">end</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

mytable<span class="token punctuation">.</span>key1 <span class="token operator">=</span> <span class="token string">&quot;new value&quot;</span>
mytable<span class="token punctuation">.</span>key2 <span class="token operator">=</span> <span class="token number">4</span>

<span class="token function">print</span><span class="token punctuation">(</span>mytable<span class="token punctuation">.</span>key1<span class="token punctuation">,</span>mytable<span class="token punctuation">.</span>key2<span class="token punctuation">)</span>
<span class="token comment">-- 以上实例执行输出结果为：</span>
<span class="token comment">-- new value    &quot;4&quot;</span>
</code></pre></div><h3 id="为表添加操作符"><a href="#为表添加操作符" class="header-anchor">#</a> 为表添加操作符</h3> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">function</span> <span class="token function">table_maxn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
    <span class="token keyword">local</span> mn <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">do</span>
        <span class="token keyword">if</span> mn <span class="token operator">&lt;</span> k <span class="token keyword">then</span>
            mn <span class="token operator">=</span> k
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
    <span class="token keyword">return</span> mn
<span class="token keyword">end</span>

<span class="token comment">-- 两表相加操作</span>
mytable <span class="token operator">=</span> <span class="token function">setmetatable</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  __add <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span> newtable<span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token function">table_maxn</span><span class="token punctuation">(</span>newtable<span class="token punctuation">)</span> <span class="token keyword">do</span>
      table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span> <span class="token function">table_maxn</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>newtable<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
    <span class="token keyword">return</span> mytable
  <span class="token keyword">end</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

secondtable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">}</span>

mytable <span class="token operator">=</span> mytable <span class="token operator">+</span> secondtable
        <span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> <span class="token function">ipairs</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span> <span class="token keyword">do</span>
<span class="token function">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>__add	    对应的运算符 <span class="token string">'+'</span><span class="token builtin class-name">.</span>
__sub	    对应的运算符 <span class="token string">'-'</span><span class="token builtin class-name">.</span>
__mul	    对应的运算符 <span class="token string">'*'</span><span class="token builtin class-name">.</span>
__div	    对应的运算符 <span class="token string">'/'</span><span class="token builtin class-name">.</span>
__mod	    对应的运算符 <span class="token string">'%'</span><span class="token builtin class-name">.</span>
__unm	    对应的运算符 <span class="token string">'-'</span><span class="token builtin class-name">.</span>
__concat	对应的运算符 <span class="token string">'..'</span><span class="token builtin class-name">.</span>
__eq	    对应的运算符 <span class="token string">'=='</span><span class="token builtin class-name">.</span>
__lt	    对应的运算符 <span class="token string">'&lt;'</span><span class="token builtin class-name">.</span>
__le	    对应的运算符 <span class="token string">'&lt;='</span><span class="token builtin class-name">.</span>
</code></pre></div><h3 id="call-元方法"><a href="#call-元方法" class="header-anchor">#</a> __call 元方法</h3> <p>__call 元方法在 Lua 调用一个值时调用。</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">-- 计算表中最大值，table.maxn在Lua5.2以上版本中已无法使用</span>
<span class="token comment">-- 自定义计算表中最大键值函数 table_maxn，即计算表的元素个数</span>
<span class="token keyword">function</span> <span class="token function">table_maxn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
    <span class="token keyword">local</span> mn <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">do</span>
        <span class="token keyword">if</span> mn <span class="token operator">&lt;</span> k <span class="token keyword">then</span>
            mn <span class="token operator">=</span> k
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
    <span class="token keyword">return</span> mn
<span class="token keyword">end</span>

<span class="token comment">-- 定义元方法__call</span>
mytable <span class="token operator">=</span> <span class="token function">setmetatable</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  __call <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>mytable<span class="token punctuation">,</span> newtable<span class="token punctuation">)</span>
        sum <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token function">table_maxn</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span> <span class="token keyword">do</span>
                sum <span class="token operator">=</span> sum <span class="token operator">+</span> mytable<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token keyword">end</span>
    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token function">table_maxn</span><span class="token punctuation">(</span>newtable<span class="token punctuation">)</span> <span class="token keyword">do</span>
                sum <span class="token operator">=</span> sum <span class="token operator">+</span> newtable<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token keyword">end</span>
        <span class="token keyword">return</span> sum
  <span class="token keyword">end</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
newtable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">mytable</span><span class="token punctuation">(</span>newtable<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">-- 以上实例执行输出结果为：70</span>
</code></pre></div><h3 id="tostring-元方法"><a href="#tostring-元方法" class="header-anchor">#</a> __tostring 元方法</h3> <p>__tostring 元方法用于修改表的输出行为。</p> <div class="language-lua extra-class"><pre class="language-lua"><code>mytable <span class="token operator">=</span> <span class="token function">setmetatable</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  __tostring <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span>
    sum <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> <span class="token function">pairs</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span> <span class="token keyword">do</span>
                sum <span class="token operator">=</span> sum <span class="token operator">+</span> v
        <span class="token keyword">end</span>
    <span class="token keyword">return</span> <span class="token string">&quot;表所有元素的和为 &quot;</span> <span class="token operator">..</span> sum
  <span class="token keyword">end</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>mytable<span class="token punctuation">)</span>
<span class="token comment">-- 以上实例执行输出结果为：表所有元素的和为 60</span>
</code></pre></div><h2 id="lua协同程序-coroutine"><a href="#lua协同程序-coroutine" class="header-anchor">#</a> lua协同程序(coroutine)</h2> <p>Lua 协同程序(coroutine)与线程比较类似：拥有独立的堆栈，独立的局部变量，独立的指令指针，同时又与其它协同程序共享全局变量和其它大部分东西。</p> <h3 id="线程和协同程序区别"><a href="#线程和协同程序区别" class="header-anchor">#</a> 线程和协同程序区别</h3> <ol><li>线程与协同程序的主要区别在于，一个具有多个线程的程序可以同时运行几个线程，而协同程序却需要彼此协作的运行。</li> <li>在任一指定时刻只有一个协同程序在运行，并且这个正在运行的协同程序只有在明确的被要求挂起的时候才会被挂起。</li> <li>协同程序有点类似同步的多线程，在等待同一个线程锁的几个线程有点类似协同。</li></ol> <div class="custom-block danger"><p class="custom-block-title">警告</p> <p>了解C++的线程后再看</p></div></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Agnes001/blog_vuepress/edit/master/docs/30.编程技术/11.Lua技术栈/10.Lua基础语法.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="tags"><a href="/tags/?tag=Lua" title="标签">
      #Lua
    </a><a href="/tags/?tag=grammer" title="标签">
      #grammer
    </a></div> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/technology/c++/jj-stl/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">
        侯捷stl
      </div></a> <a href="/technology/lua/lua-function/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">
        Cpp与Lua联合
      </div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/technology/c++/jj-stl/" class="prev">侯捷stl</a></span> <span class="next"><a href="/technology/lua/lua-function/">Cpp与Lua联合</a>
        →
      </span></p></div></div></div> <!----> </main></div> <div class="footer"><div class="icons"><a href="mailto:17125131@bjtu.edu.cn" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Agnes001" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2df33bbd.js" defer></script><script src="/assets/js/2.f873f4a5.js" defer></script><script src="/assets/js/61.d3577fc0.js" defer></script>
  </body>
</html>