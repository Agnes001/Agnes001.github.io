(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{501:function(s,e,t){"use strict";t.r(e);var a=t(46),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"准备知识"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备知识"}},[s._v("#")]),s._v(" 准备知识")]),s._v(" "),t("p",[s._v("YAML 的配置文件后缀为 .yml，如：runoob.yml 。\n基本语法")]),s._v(" "),t("ul",[t("li",[s._v("大小写敏感")]),s._v(" "),t("li",[s._v("使用缩进表示层级关系")]),s._v(" "),t("li",[s._v("缩进不允许使用tab，只允许空格")]),s._v(" "),t("li",[s._v("缩进的空格数不重要，只要相同层级的元素左对齐即可")]),s._v(" "),t("li",[s._v("'#'表示注释")]),s._v(" "),t("li",[s._v("YAML 数组,以 - 开头的行表示构成一个数组")])]),s._v(" "),t("h2",{attrs:{id:"在线安装dockercompose-推荐"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在线安装dockercompose-推荐"}},[s._v("#")]),s._v(" 在线安装DockerCompose（推荐）")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L https://get.daocloud.io/docker/compose/releases/download/1.27.4/docker-compose-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -s"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -m"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/bin/docker-compose\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/docker-compose\ndocker-compose -v\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者采用下面的方式")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L https://raw.githubusercontent.com/docker/compose/1.24.1/contrib/completion/bash/docker-compose "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/bash_completion.d/docker-compose\n")])])]),t("h2",{attrs:{id:"离线安装dockercompose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#离线安装dockercompose"}},[s._v("#")]),s._v(" 离线安装DockerCompose")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("下载地址：https://github.com/docker/compose/releases"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("opens new window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" docker-compose-Linux-x86_64 /usr/local/bin/docker-compose\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/docker-compose\ndocker-compose -v\n")])])]),t("p",[s._v("docker-compose.yml示例：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 修改配置文件后，重启容器 docker-compose up -d --force-recreate")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 项目依赖启动 docker-compose up mariadb redis")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 列出所有容器 docker-compose ps")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 删除Tag为空的镜像 docker images|grep none|awk '{print $3}'|xargs docker rmi -f")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 关闭所有容器 docker-compose down")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 启动单个容器(处于同一网络中) docker run -it --name=resolve --net=tslc-mysql tslc-resolve:latest bash ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("####################################")]),s._v("\nversion: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\nservices:\n  tslc-resolve:\n    image: tslc-resolve:latest\n    container_name: tslc-resolve\n    build:\n      context: "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n      dockerfile: Dockerfile  \n    restart: always\n    privileged: "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    environment:\n      TZ: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Asia/Shanghai"')]),s._v("\n    ports:\n      - "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'8082:8082'")]),s._v("\n    volumes:\n      - /etc/localtime:/etc/localtime\n      - ./conf/resolve/:/data/drogon/TSLC_BACKEND_RESOLVE/conf\n      - ./data/resolve/logs:/data/drogon/TSLC_BACKEND_RESOLVE/logs\n      - ./data/resolve/static:/data/drogon/TSLC_BACKEND_RESOLVE/static\n    depends_on:\n      - tslc-mysql\n    networks:\n      - net-tslc\n\n  tslc-mysql:\n    image: mysql:8.0\n    container_name: tslc-mysql\n    restart: always\n    privileged: "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    environment:\n      MYSQL_ROOT_HOST: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%"')]),s._v("\n      MYSQL_ROOT_PASSWORD: ITrain-BJ6\n      TZ: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Asia/Shanghai"')]),s._v("\n    command:\n      - --innodb_buffer_pool_size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("256M\n      - --max_connections"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("81")]),s._v("\n      - --character-set-server"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8mb4\n      - --collation-server"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8mb4_general_ci\n      - --default-authentication-plugin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql_native_password\n      - --explicit_defaults_for_timestamp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n      - --lower_case_table_names"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    ports:\n      - "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3306:3306'")]),s._v("\n    volumes:\n      - /etc/localtime:/etc/localtime\n      - ./conf/initdb/:/docker-entrypoint-initdb.d/\n      - ./data/mysql/:/var/lib/mysql/\n    networks:\n      - net-tslc\n\nnetworks:\n  net-tslc:\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);